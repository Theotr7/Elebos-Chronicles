{% extends 'base.html.twig' %}

{% block title %}Mes boosters
{% endblock %}

{% block body %}
	<h1>Mes boosters</h1>

	{% if userBoosters is empty %}
		<p>Tu n'as encore aucun booster dans ta collection.</p>
	{% else %}
		<div class="booster-grid">
			{% for userBooster in userBoosters %}
				<div class="booster-wrapper">
					{% include 'components/booster.html.twig' with {
                        booster: {
                            backgroundUrl: userBooster.booster.backgroundUrl,
                            titleTop: 'Elebos Chronicles',
                            subtitleTop: 'The Card Game',
                            symbolUrl: userBooster.booster.imageUrl,
                            titleBottom: userBooster.booster.boosterName,
                            cardCount: userBooster.booster.cardCount,
                            cardLabel: 'Cartes'
                        }
                    } %}

					<div style="text-align: center; margin-top: 0.5rem;">
						<button type="button" class="btn-primary open-booster-btn" data-id="{{ userBooster.id }}">
							Ouvrir ce booster
						</button>
					</div>
				</div>
			{% endfor %}
		</div>
	{% endif %}

	{# MODALE POUR LES CARTES TIRÉES #}
	<div id="booster-modal" class="booster-modal hidden">
		<div class="booster-modal-content">
			<div class="booster-modal-cards">
				<h2 style="margin-bottom: 1rem; color: #2c1d0d; text-align: center;">Tu as obtenu :</h2>

				<div class="card-grid" id="booster-cards-container"></div>

				<div class="booster-modal-buttons">
					<a href="{{ path('user_collection') }}" class="btn-primary">Voir ma collection</a>
					<button class="btn-primary" id="close-modal-btn">Ouvrir un autre booster</button>
				</div>
			</div>
		</div>
	</div>

	<script src="{{ asset('js/booster.js') }}"></script>

	<style>
		.booster-modal {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0, 0, 0, 0.6);
			backdrop-filter: blur(6px);
			display: flex;
			align-items: center;
			justify-content: center;
			z-index: 9999;
		}

		.booster-modal.hidden {
			display: none;
		}

		.booster-modal-content {
			background: #fdf6e3;
			border: 3px solid #aa7442;
			padding: 2rem;
			border-radius: 12px;
			max-width: 90vw;
			max-height: 90vh;
			overflow-y: auto;
			text-align: center;
			box-shadow: 0 0 20px rgba(0, 0, 0, 0.4);
		}

		.card-grid {
			display: flex;
			flex-wrap: wrap;
			justify-content: center;
			gap: 1.5rem;
		}


		.card-grid .card {
			opacity: 0;
			transform: scale(0.9);
			animation: fadeInCard 0.4s ease forwards;
		}

		.card-grid .card:nth-child(1) {
			animation-delay: 0.1s;
		}
		.card-grid .card:nth-child(2) {
			animation-delay: 0.2s;
		}
		.card-grid .card:nth-child(3) {
			animation-delay: 0.3s;
		}
		.card-grid .card:nth-child(4) {
			animation-delay: 0.4s;
		}
		.card-grid .card:nth-child(5) {
			animation-delay: 0.5s;
		}
		.card-grid .card:nth-child(6) {
			animation-delay: 0.6s;
		}
		.card-grid .card:nth-child(7) {
			animation-delay: 0.7s;
		}
		.card-grid .card:nth-child(8) {
			animation-delay: 0.8s;
		}

		@keyframes fadeInCard {
			from {
				opacity: 0;
				transform: scale(0.9);
			}
			to {
				opacity: 1;
				transform: scale(1);
			}
		}

		.booster-modal-buttons {
			margin-top: 2rem;
			display: flex;
			justify-content: center;
			gap: 2rem;
			flex-wrap: wrap;
		}

		/* Style du bouton appliqué partout */
		.btn-primary {
			display: inline-block;
			margin-top: 0.8rem;
			padding: 10px 18px;
			font-family: "Cinzel", serif;
			font-size: 1rem;
			font-weight: bold;
			color: #fffaf0;
			background: linear-gradient(180deg, #7a4a26 0%, #4b2e19 100%);
			border: 2px solid #c2a35e;
			border-radius: 8px;
			text-transform: uppercase;
			cursor: pointer;
			transition: all 0.2s ease-in-out;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.4), inset 0 2px 4px rgba(255, 255, 255, 0.1);
		}

		.btn-primary:hover {
			background: linear-gradient(180deg, #8c5c33 0%, #5e3b20 100%);
			transform: translateY(-2px) scale(1.03);
			box-shadow: 0 6px 10px rgba(0, 0, 0, 0.5), inset 0 2px 6px rgba(255, 255, 255, 0.15);
		}

		.btn-primary:active {
			transform: translateY(1px) scale(0.98);
			background: linear-gradient(180deg, #5e3b20 0%, #3a2213 100%);
			box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.6);
		}
	</style>
{% endblock %}
